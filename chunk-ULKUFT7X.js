import{da as N,q as S}from"./chunk-H4TD5NBQ.js";import{K as w}from"./chunk-K6YP4BYP.js";import{j as v}from"./chunk-VOZUJI7M.js";import{Hc as E,Ic as D,Vb as h,Wb as m,ab as p,ac as d,db as c,ib as s,pb as u,sb as l,tc as f,uc as g}from"./chunk-A7MCCE2B.js";var j=(()=>{class e{transform(i){if(!i)return"";let n="geolocation"in i?i.geolocation:i;return`${O()}${n[0]},${n[1]}`}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275pipe=l({name:"geolink",type:e,pure:!0})}}return e})();function O(){return R()?"http://maps.apple.com/?ll=":"https://maps.google.com/?q="}function R(){return/iPhone|iPad|Macintosh/.test(window.navigator.userAgent)}function r(e,t=2){return("0000000000000000"+e.toString()).slice(-t)}function A(e){let t=[];return t.push(r(e.getFullYear(),4)),t.push(r(e.getMonth()+1)),t.push(r(e.getDate())),t.join("")}function I(e){let t=[];return t.push(r(e.getFullYear(),4)),t.push(r(e.getMonth()+1)),t.push(r(e.getDate()+1)),t.join("")}function T(e){return String(e).replace(/[\\;,"]/g,t=>"\\"+t)}var a=class{constructor(t,i,n){this.title=t.transform(i.title),this.start=A(new Date(i.period?.from??0)),this.end=I(new Date(i.period?.to??0)),this.location=t.transform(t.transform(T(n.title)))}toString(){let t=[];return t.push("BEGIN:VCALENDAR"),t.push("VERSION:2.0"),t.push("PRODID:-//jpdgashizuoka/dgjapan//NONSGML v1.0//EN"),t.push("BEGIN:VEVENT"),t.push(`DTSTART;VALUE=DATE:${this.start}`),t.push(`DTEND;VALUE=DATE:${this.end}`),t.push(`LOCATION:${this.location}`),t.push(`SUMMARY:${this.title}`),t.push("END:VEVENT"),t.push("END:VCALENDAR"),t.push(""),t.join(`\r
`)}toBlob(){return new Blob([this.toString()],{type:"text/calendar"})}};var B=(()=>{class e{constructor(i,n,o){this.remote=i,this.sanitizer=n,this.localize=o}ngOnInit(){if(!this.event)throw new Error("[event] is required");this.remote.getLocation(this.event.location).subscribe(i=>{let n=new a(this.localize,this.event,i);this.url=this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(n.toBlob())),this.filename=`${this.event.id}.ics`})}static{this.\u0275fac=function(n){return new(n||e)(s(N),s(v),s(w))}}static{this.\u0275cmp=u({type:e,selectors:[["app-icalendar"]],inputs:{event:"event"},decls:3,vars:5,consts:[[3,"href","download"]],template:function(n,o){n&1&&(h(0,"a",0),f(1),E(2,"localize"),m()),n&2&&(d("href",o.url,p)("download",o.filename),c(),g(D(2,3,"Tap to download the schedule")))},dependencies:[S],encapsulation:2})}}return e})();export{j as a,B as b};
